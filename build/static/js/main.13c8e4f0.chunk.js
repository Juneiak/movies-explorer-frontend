(this["webpackJsonpmovies-explorer-frontend"]=this["webpackJsonpmovies-explorer-frontend"]||[]).push([[0],Array(25).concat([function(e,t,n){},function(e,t,n){},,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var i=n(1),c=n.n(i),a=n(11),s=n.n(a),r=(n(25),n(4)),o=n(2),l=n(3),u=(n(26),n(0)),d=function(){return Object(u.jsx)("nav",{className:"navigation",children:Object(u.jsxs)("ul",{className:"navigation__links-list",children:[Object(u.jsx)("li",{className:"navigation__list-element",children:Object(u.jsx)(r.c,{to:"/",className:"app__link app__link-animation navigation__link",activeClassName:"app__link_active",children:"\u0424\u0438\u043b\u044c\u043c\u044b"})}),Object(u.jsx)("li",{className:"navigation__list-element",children:Object(u.jsx)(r.c,{to:"/saved-movies",className:"app__link app__link-animation navigation__link",activeClassName:"app__link_active",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"})})]})})},j=(n(33),function(){return Object(u.jsxs)(r.b,{to:"/profile",className:"account",children:[Object(u.jsx)("p",{className:"account__button-text",children:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"}),Object(u.jsx)("div",{className:"account__icon"})]})}),m=(n(34),function(e){var t=e.size,n=e.text,i=void 0===n?"":n,c=e.onButtonClick,a=e.buttonType,s=void 0===a?"button":a,r=e.active,o=void 0!==r&&r;return Object(u.jsx)("button",{className:"\n      button\n      ".concat("small"===t?"button_type_basic-small":"button_type_basic-big","\n      ").concat(o&&"button_active","\n      "),onClick:c,type:s,disabled:!o,children:i})}),p=(n(35),function(){var e=window,t=e.innerHeight;return{width:e.innerWidth,height:t}}),h=function(){var e=c.a.useState(p()),t=Object(o.a)(e,2),n=t[0],i=t[1];return c.a.useEffect((function(){var e=function(){i(p())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n},b=c.a.createContext(),f=c.a.createContext(),_=c.a.createContext(),O=function(){var e=c.a.useContext(b).currentUser,t=null===e||void 0===e?void 0:e.email,n=h().width,i=Object(l.h)("/").isExact,a=Object(l.g)(),s=c.a.useContext(f).setIsSlideMenuOpen;return Object(u.jsx)("header",{className:"\n    header\n    ".concat(i&&"header_position_main","\n    "),children:Object(u.jsxs)("div",{className:"header__content",children:[Object(u.jsx)(r.b,{className:"header__logo-link",to:"/"}),t&&n>780&&Object(u.jsx)(d,{}),Object(u.jsxs)("div",{className:"headar__menu",children:[t&&n>780&&Object(u.jsx)(j,{}),t&&n<780&&Object(u.jsx)("button",{onClick:function(){s(!0)},className:"header__burger"}),!t&&Object(u.jsxs)("div",{className:"header__auth",children:[Object(u.jsx)(r.b,{to:"/signup",className:"app__link-animation header__link",children:"\u0420\u0435\u0433\u0435\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(u.jsx)(m,{active:!0,onButtonClick:function(){a.push("/signin")},buttonType:"button",size:"small",text:"\u0412\u043e\u0439\u0442\u0438"})]})]})]})})},x=(n(36),function(){return Object(u.jsx)("footer",{className:"footer",children:Object(u.jsxs)("div",{className:"footer__content",children:[Object(u.jsx)("p",{className:"footer__author",children:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c \u0445 BeatFilm."}),Object(u.jsxs)("div",{className:"footer__misc",children:[Object(u.jsx)("span",{className:"footer__year",children:"\xa9 2021"}),Object(u.jsxs)("ul",{className:"footer__links-list",children:[Object(u.jsx)("li",{className:"footer__list-element",children:Object(u.jsx)("a",{href:"https://practicum.yandex.ru/",target:"_blank",className:"app__link app__link-animation footer__link",rel:"noopener noreferrer",children:"\u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c"})}),Object(u.jsx)("li",{className:"footer__list-element",children:Object(u.jsx)("a",{href:"https://github.com/",target:"_blank",className:"app__link app__link-animation footer__link",rel:"noopener noreferrer",children:"Github"})}),Object(u.jsx)("li",{className:"footer__list-element",children:Object(u.jsx)("a",{href:"https://ru-ru.facebook.com/",target:"_blank",className:"app__link app__link-animation footer__link",rel:"noopener noreferrer",children:"Facebook"})})]})]})]})})}),v=(n(37),function(e){var t=e.children,n=e.onMoreButtonClick,i=void 0===n?function(){}:n,c=e.buttonStatus;return Object(u.jsx)("section",{className:"movies-card-list",children:Object(u.jsxs)("div",{className:"movies-card-list__container",children:[Object(u.jsx)("ul",{className:"movies-card-list__list",children:t}),c&&Object(u.jsx)("button",{onClick:i,type:"button",className:"movies-card-list__more-button",children:"\u0415\u0449\u0451"})]})})}),g=(n(38),function(e){var t=e.deleteCardHandler,n=void 0===t?function(){}:t,i=e.isSavedMovieCard,a=void 0!==i&&i,s=e.cardData,r=s.country,l=s.director,d=s.duration,j=s.year,m=s.description,p=s.image,h=s.trailer,O=s.nameRU,x=s.nameEN,v=s.thumbnail,g=s.movieId,N=Math.floor(d/60),k=d%60,C=c.a.useState(!1),S=Object(o.a)(C,2),y=S[0],E=S[1],T=c.a.useContext(_),P=T.addMovieHandler,w=T.deleteMovieHandler,I=T.likedMoviesIdList,L=c.a.useContext(b).currentUser,M=c.a.useContext(f).setIsNotLoggedInPopupOpen;return c.a.useEffect((function(){I.includes(g)&&E(!0)}),[I]),Object(u.jsxs)("li",{className:"movies-card",children:[Object(u.jsxs)("div",{className:"movies-card__info",children:[Object(u.jsx)("p",{className:"movies-card__title",children:O}),Object(u.jsx)("span",{className:"movies-card__duration",children:"".concat(N,"\u0447 ").concat(k,"\u043c")}),a?Object(u.jsx)("button",{type:"button",onClick:function(){w(g).then((function(e){return n(e.movieId)})).catch((function(e){return console.error("delete card action error in movies card - ".concat(e))}))},className:"movies-card__delete-button"}):Object(u.jsx)("button",{type:"button",onClick:function(){L.email?y?w(g).then((function(){return E(!1)})).catch((function(e){return console.error("unlike action error in movies card - ".concat(e))})):P({country:r,director:l,duration:d,year:j,description:m,image:p,trailer:h,nameRU:O,nameEN:x,thumbnail:v,movieId:g}).then((function(){return E(!0)})).catch((function(e){return console.error("like action error in movies card - ".concat(e))})):M(!0)},className:"movies-card__like-button ".concat(y&&"movies-card__like-button_active")})]}),Object(u.jsx)("img",{className:"movies-card__card-image",alt:"\u0444\u043e\u0442\u043e \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438",src:p})]})}),N=(n(39),n.p+"static/media/search-icon.658eea3a.svg"),k=(n(40),function(e){var t=e.toggleFilter,n=e.isActive;return Object(u.jsxs)("label",{className:"filter-check-box",children:[Object(u.jsx)("input",{checked:n,onChange:t,className:"filter-check-box__input",type:"checkbox"}),Object(u.jsx)("div",{className:"filter-check-box__pseudo"}),Object(u.jsx)("div",{className:"filter-check-box__dot"})]})}),C=function(e){var t=e.onSearchButtonClick,n=e.isSearched,i=h().width,a=c.a.useState(""),s=Object(o.a)(a,2),r=s[0],l=s[1],d=c.a.useState(!1),j=Object(o.a)(d,2),m=j[0],p=j[1],b=function(){p(!m),n&&t(r,!m)};return Object(u.jsx)("section",{className:"search-form",children:Object(u.jsxs)("div",{className:"search-form__container",children:[Object(u.jsxs)("form",{className:"search-form__form",children:[Object(u.jsxs)("fieldset",{className:"search-form__text-input-container",children:[Object(u.jsx)("img",{className:"search-form__lupa",src:N,alt:"\u043b\u0443\u043f\u0430 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430"}),Object(u.jsxs)("div",{className:"search-form__search-input",children:[Object(u.jsx)("input",{onChange:function(e){return l(e.target.value)},className:"search-form__text-input",value:r,type:"text",minLength:"1",required:!0,placeholder:"\u0424\u0438\u043b\u044c\u043c"}),Object(u.jsx)("span",{className:"search-form__error"})]}),Object(u.jsx)("button",{type:"button",onClick:function(){t(r,m)},className:"search-form__search-button",children:"\u041d\u0430\u0439\u0442\u0438"})]}),i>600&&Object(u.jsxs)("div",{className:"search-form__checkbox-container",children:[Object(u.jsx)(k,{isActive:m,toggleFilter:b}),Object(u.jsx)("span",{className:"search-form__checkbox-title",children:"\u041a\u043e\u0440\u043e\u0442\u043a\u043e\u043c\u0435\u0442\u0440\u0430\u0436\u043a\u0438"})]})]}),i<600&&Object(u.jsxs)("div",{className:"search-form__checkbox-container",children:[Object(u.jsx)(k,{isActive:m,toggleFilter:b}),Object(u.jsx)("span",{className:"search-form__checkbox-title",children:"\u041a\u043e\u0440\u043e\u0442\u043a\u043e\u043c\u0435\u0442\u0440\u0430\u0436\u043a\u0438"})]})]})})},S=(n(41),function(){return Object(u.jsx)("div",{className:"preloader",children:Object(u.jsx)("div",{className:"preloader__container",children:Object(u.jsx)("span",{className:"preloader__round"})})})}),y=(n(42),function(e){var t=e.inputTitle,n=void 0===t?"emptyName":t,i=e.inputValue,c=void 0===i?"":i,a=e.inputType,s=void 0===a?"text":a,r=e.inputPlaceholder,o=void 0===r?"":r,l=e.isRequired,d=void 0!==l&&l,j=e.inputName,m=e.inputErrors,p=e.maxLength,h=void 0===p?"":p,b=e.minLength,f=void 0===b?"":b,_=e.isInputActive,O=void 0===_||_,x=e.inputOnChange,v=void 0===x?function(){}:x;return Object(u.jsxs)("div",{className:"input-container",children:[Object(u.jsx)("span",{className:"input-container__name",children:n}),Object(u.jsx)("input",{className:"input-container__input",value:c,type:s,placeholder:o,required:d,onChange:v,name:j,minLength:String(f),maxLength:String(h),disabled:!O}),m&&Object(u.jsx)("span",{className:"input-container__error",children:m})]})}),E=(n(43),function(e){var t=e.question,n=e.linkText,i=e.linkTo;return Object(u.jsxs)("div",{className:"question-link",children:[Object(u.jsx)("p",{className:"question-link__question",children:t}),Object(u.jsx)(r.b,{className:"app__link app__link-animation question-link__link",to:i,children:n})]})}),T=(n(44),n.p+"static/media/logo.fe4adf65.svg"),P=function(e){var t=e.title;return Object(u.jsxs)("div",{className:"simple-window-title",children:[Object(u.jsx)(r.b,{to:"/",children:Object(u.jsx)("img",{className:"simple-window-title__logo",alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u0441\u0430\u0439\u0442\u0430",src:T})}),Object(u.jsx)("p",{className:"simple-window-title__title",children:t})]})},w=(n(45),n(46),function(e){var t=e.linkTo,n=e.linkName,i=e.onLinkClick;return Object(u.jsx)("li",{className:"slide-menu-link",children:Object(u.jsx)(r.c,{to:t,exact:!0,onClick:function(){return i()},className:"slide-menu-link__link",activeClassName:"slide-menu-link__link_active",children:n})})}),I=document.querySelector("#popupsRoot"),L=function(){var e=c.a.useState(!1),t=Object(o.a)(e,2),n=t[0],i=t[1],a=c.a.useContext(f).setIsSlideMenuOpen;c.a.useEffect((function(){i(!0)}),[]);var r=function(){i(!1),setTimeout((function(){a(!1)}),300)};return s.a.createPortal(Object(u.jsx)("section",{onClick:r,className:"slide-menu ".concat(n&&"slide-menu_opened"),children:Object(u.jsxs)("div",{className:"slide-menu__container ".concat(n&&"slide-menu__container_opened"),children:[Object(u.jsx)("button",{onClick:r,type:"button",className:"slide-menu__close-button"}),Object(u.jsxs)("div",{className:"slide-menu__content",children:[Object(u.jsx)("nav",{className:"slide-menu__navigation",children:Object(u.jsxs)("ul",{className:"slide-menu__nav-list",children:[Object(u.jsx)(w,{onLinkClick:r,linkName:"\u0424\u0438\u043b\u044c\u043c\u044b",linkTo:"/"}),Object(u.jsx)(w,{onLinkClick:r,linkName:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b",linkTo:"/saved-movies"})]})}),Object(u.jsx)(j,{})]})]})}),I)},M=(n(47),document.querySelector("#popupsRoot")),B=function(){var e=Object(l.g)(),t=c.a.useContext(f).setIsNotLoggedInPopupOpen;return s.a.createPortal(Object(u.jsx)("section",{className:"not-loggedin-popup",children:Object(u.jsxs)("div",{className:"not-loggedin-popup__container",children:[Object(u.jsx)("button",{onClick:function(){return t(!1)},type:"button",className:"not-loggedin-popup__close-button"}),Object(u.jsxs)("div",{className:"not-loggedin-popup__content",children:[Object(u.jsx)("span",{className:"not-loggedin-popup__message",children:"\u0412\u044b \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b \u0434\u043b\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f"}),Object(u.jsx)(m,{active:!0,text:"\u0412\u043e\u0439\u0442\u0438",onButtonClick:function(){t(!1),e.push("/signin")},size:"big"})]})]})}),M)},F=(n(48),n(12)),q=n(9),A=function(){var e=c.a.useState({}),t=Object(o.a)(e,2),n=t[0],i=t[1],a=c.a.useState({}),s=Object(o.a)(a,2),r=s[0],l=s[1],u=c.a.useState(!1),d=Object(o.a)(u,2),j=d[0],m=d[1],p=c.a.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i(e),l(t),m(n)}));return{isValid:j,values:n,errors:r,resetForm:p,handleChange:function(e){var t=e.target,c=t.name;i(Object(q.a)(Object(q.a)({},n),{},Object(F.a)({},c,t.value))),l(Object(q.a)(Object(q.a)({},r),{},Object(F.a)({},c,t.validationMessage))),m(t.closest("form").checkValidity())}}},R=function(e){var t=e.onSigninButtonClick,n=c.a.useState(""),i=Object(o.a)(n,2),a=i[0],s=i[1],r=c.a.useState(!1),l=Object(o.a)(r,2),d=l[0],j=l[1],p=A(),h=p.isValid,b=p.values,f=p.errors,_=p.resetForm,O=p.handleChange,x=function(e){O(e),s("")};return Object(u.jsx)("main",{className:"login-page",children:Object(u.jsxs)("section",{className:"login-page__content",children:[Object(u.jsx)(P,{title:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!"}),Object(u.jsxs)("form",{className:"login-page__form",children:[Object(u.jsxs)("fieldset",{className:"login-page__inputs",children:[Object(u.jsx)(y,{inputTitle:"E-mail",inputValue:b.signinEmail,inputType:"email",isRequired:!0,inputName:"signinEmail",inputOnChange:x,inputErrors:f.signinEmail,isInputActive:!d}),Object(u.jsx)(y,{inputTitle:"\u041f\u0430\u0440\u043e\u043b\u044c",inputValue:b.signinPassword,inputType:"password",inputPlaceholder:"\u0412\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c",isRequired:!0,minLength:6,inputName:"signinPassword",inputOnChange:x,inputErrors:f.signinPassword,isInputActive:!d})]}),Object(u.jsxs)("div",{className:"login-page__button-container",children:[Object(u.jsx)("p",{className:"login-page__error",children:a}),Object(u.jsx)(m,{active:h&&!d,onButtonClick:function(){j(!0),t(b.signinEmail,b.signinPassword).then((function(){_(),j(!1)})).catch((function(e){s(e),j(!1)}))},buttonType:"button",size:"big",text:"\u0412\u043e\u0439\u0442\u0438"})]})]}),Object(u.jsx)(E,{question:"\u0415\u0449\u0451 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",linkText:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",linkTo:"/signup"})]})})},U=(n(49),function(e,t){var n=new RegExp(t.searchText.toLowerCase());return t.isShortFilm?e.filter((function(e){return e.duration<=40&&n.test(e.nameRU.toLowerCase())})):e.filter((function(e){return n.test(e.nameRU.toLowerCase())}))}),H=function(e){var t=e.getAllMoviesHandler,n=c.a.useState([]),i=Object(o.a)(n,2),a=i[0],s=i[1],r=c.a.useState(!1),l=Object(o.a)(r,2),d=l[0],j=l[1],m=c.a.useState(!1),p=Object(o.a)(m,2),h=p[0],b=p[1],f=c.a.useState(!1),_=Object(o.a)(f,2),N=_[0],k=_[1],y=c.a.useState(5),E=Object(o.a)(y,2),T=E[0],P=E[1],w=c.a.useState(!1),I=Object(o.a)(w,2),L=I[0],M=I[1],B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];s(e),e.length<1?j(!0):j(!1),e.length<=5?M(!1):M(!0)};return c.a.useEffect((function(){T>=a.length&&M(!1)}),[T]),c.a.useEffect((function(){var e=JSON.parse(localStorage.getItem("filteredMovies"));e&&B(e)}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(O,{}),Object(u.jsxs)("main",{className:"movies-page",children:[Object(u.jsx)(C,{onSearchButtonClick:function(e,n){b(!0),t().then((function(t){var i=U(t,{searchText:e,isShortFilm:n});localStorage.setItem("filteredMovies",JSON.stringify(i)),B(i),b(!1)})).catch((function(e){b(!1),k(!0)}))},isSearched:!!a.length}),N?Object(u.jsx)("h2",{className:"movies-page__get-movies-error",children:"\u0412\u043e \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0441 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435\u043c \u0438\u043b\u0438 \u0441\u0435\u0440\u0432\u0435\u0440 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437"}):h?Object(u.jsx)(S,{}):d?Object(u.jsx)("h2",{className:"movies-page__nothing-found",children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}):Object(u.jsx)(v,{onMoreButtonClick:function(){a.length>T&&P(T+5)},buttonStatus:L,children:a.slice(0,T).map((function(e,t){return Object(u.jsx)(g,{cardData:e},t)}))})]}),Object(u.jsx)(x,{})]})},J=(n(50),function(e){var t=e.getUserMoviesHandler,n=c.a.useState([]),i=Object(o.a)(n,2),a=i[0],s=i[1],r=c.a.useState(!1),l=Object(o.a)(r,2),d=l[0],j=l[1],m=c.a.useState(!1),p=Object(o.a)(m,2),h=p[0],b=p[1],f=c.a.useState(!1),_=Object(o.a)(f,2),N=_[0],k=_[1],y=function(e){return s(a.filter((function(t){return t.movieId!==e})))};return c.a.useEffect((function(){b(!0),t().then((function(e){var t=U(e,{searchText:"",isShortFilm:!1});s(t),b(!1)})).catch((function(e){b(!1),k(!0)}))}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(O,{}),Object(u.jsxs)("main",{className:"saved-movies-page",children:[Object(u.jsx)(C,{onSearchButtonClick:function(e,n){b(!0),t().then((function(t){var i=U(t,{searchText:e,isShortFilm:n});s(i),i.length<1?j(!0):j(!1),b(!1)})).catch((function(e){b(!1),k(!0)}))},isSearched:!!a.length}),N?Object(u.jsx)("h2",{className:"saved-movies-page__get-movies-error",children:"\u0412\u043e \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0441 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435\u043c \u0438\u043b\u0438 \u0441\u0435\u0440\u0432\u0435\u0440 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437"}):h?Object(u.jsx)(S,{}):d?Object(u.jsx)("h2",{className:"saved-movies-page__nothing-found",children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}):Object(u.jsx)(v,{buttonStatus:!1,children:a.map((function(e){return Object(u.jsx)(g,{deleteCardHandler:y,cardData:e,isSavedMovieCard:!0},e.movieId)}))})]}),Object(u.jsx)(x,{})]})}),V=(n(51),function(e){var t=e.onSignupButtonClick,n=c.a.useState(""),i=Object(o.a)(n,2),a=i[0],s=i[1],r=c.a.useState(!1),l=Object(o.a)(r,2),d=l[0],j=l[1],p=A(),h=p.isValid,b=p.values,f=p.errors,_=p.resetForm,O=p.handleChange,x=function(e){O(e),s("")};return Object(u.jsx)("main",{className:"register-page",children:Object(u.jsxs)("section",{className:"register-page__content",children:[Object(u.jsx)(P,{title:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!"}),Object(u.jsxs)("form",{className:"register-page__form",children:[Object(u.jsxs)("fieldset",{className:"register-page__inputs",children:[Object(u.jsx)(y,{inputTitle:"\u0418\u043c\u044f",inputValue:b.signupName,inputType:"text",isRequired:!0,inputOnChange:x,inputName:"signupName",inputErrors:f.signupName,maxLength:30,minLength:2,isInputActive:!d,inputPlaceholder:"\u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f: \u0440\u0443\u0441\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b, \u043f\u0435\u0440\u0432\u0430\u044f \u0437\u0430\u0433\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(u.jsx)(y,{inputTitle:"E-mail",inputValue:b.signupEmail,inputType:"email",isRequired:!0,inputOnChange:x,inputName:"signupEmail",inputErrors:f.signupEmail,isInputActive:!d,inputPlaceholder:"\u0412\u0430\u0448\u0430 \u043f\u043e\u0447\u0442\u0430"}),Object(u.jsx)(y,{inputTitle:"\u041f\u0430\u0440\u043e\u043b\u044c",inputValue:b.signupPassword,inputType:"password",inputPlaceholder:"\u0412\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c",isRequired:!0,minLength:6,inputOnChange:x,inputName:"signupPassword",inputErrors:f.signupPassword,isInputActive:!d})]}),Object(u.jsxs)("div",{className:"register-page__button-container",children:[Object(u.jsx)("p",{className:"register-page__error",children:a}),Object(u.jsx)(m,{active:h&&!d,onButtonClick:function(){j(!0),t(b.signupName,b.signupEmail,b.signupPassword).then((function(){_(),j(!1)})).catch((function(e){s(e),j(!1)}))},buttonType:"button",size:"big",text:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]}),Object(u.jsx)(E,{question:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",linkText:"\u0412\u043e\u0439\u0442\u0438",linkTo:"/signin"})]})})}),z=(n(52),function(e){var t=e.onSignoutButtonClick,n=e.onUpdateButtonClick,i=c.a.useState(""),a=Object(o.a)(i,2),s=a[0],r=a[1],l=c.a.useState(!1),d=Object(o.a)(l,2),j=d[0],m=d[1],p=c.a.useContext(b).currentUser,h=A(),f=h.isValid,_=h.values,x=h.errors,v=h.resetForm,g=h.handleChange,N=f&&(p.email!==_.profileEmail||p.name!==_.profileName),k=function(){return v({profileName:p.name,profileEmail:p.email})};c.a.useEffect((function(){k()}),[p]);var C=function(e){g(e),r("")};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(O,{}),Object(u.jsx)("main",{className:"profile-page",children:Object(u.jsxs)("section",{className:"profile-page__content",children:[Object(u.jsx)("h1",{className:"profile-page__title",children:"\u041f\u0440\u0438\u0432\u0435\u0442, ".concat(p.name,"!")}),Object(u.jsxs)("form",{className:"profile-page__form",children:[Object(u.jsxs)("div",{className:"profile-page__values",children:[Object(u.jsxs)("div",{className:"profile-page__value-container",children:[Object(u.jsx)("span",{className:"profile-page__var",children:"\u0418\u043c\u044f"}),Object(u.jsx)("input",{type:"text",onChange:C,value:_.profileName,required:!0,minLength:"2",maxLength:"30",className:"profile-page__value",name:"profileName",disabled:j}),Object(u.jsx)("span",{className:"profile-page__input-error",children:x.profileName})]}),Object(u.jsxs)("div",{className:"profile-page__value-container",children:[Object(u.jsx)("span",{className:"profile-page__var",children:"E-mail"}),Object(u.jsx)("input",{type:"email",onChange:C,value:_.profileEmail,required:!0,className:"profile-page__value",name:"profileEmail",disabled:j}),Object(u.jsx)("span",{className:"profile-page__input-error",children:x.profileEmail})]})]}),Object(u.jsxs)("div",{className:"profile-page__buttons",children:[Object(u.jsx)("p",{className:"profile-page__update-error",children:s}),Object(u.jsx)("button",{type:"button",onClick:function(){N&&(m(!0),n(_.profileName,_.profileEmail).then((function(){return m(!1)})).catch((function(e){k(),r(e),m(!1)})))},disabled:!N||j,className:"\n                  app__link\n                  app__link-animation\n                  profile-page__button\n                  profile-page__button_edit\n                  ".concat(!N&&"profile-page__button_inactive","\n                "),children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(u.jsx)("button",{type:"button",onClick:t,className:" app__link app__link-animation profile-page__button profile-page__button_signout ",children:"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"})]})]})]})})]})}),D=(n(53),function(){var e=Object(l.g)();return Object(u.jsxs)("main",{className:"not-found-page",children:[Object(u.jsx)("h1",{className:"not-found-page__title",children:"404"}),Object(u.jsx)("p",{className:"not-found-page__subtitile",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(u.jsx)("button",{onClick:function(){e.goBack()},type:"button",className:"not-found-page__back-button",children:"\u041d\u0430\u0437\u0430\u0434"})]})}),G="https://api.juneiak.movieproject.nomoredomains.monster",W=function(e){return e.ok?e.json():Promise.reject("FetchError: ".concat(e.status," - ").concat(e.message))},K=function(e,t,n){var i=Date.now(),c={value:JSON.stringify(t),expiredTime:i+n};localStorage.setItem(e,JSON.stringify(c))},Q=function(e){var t=localStorage.getItem(e);if(!t)return null;var n=Date.now(),i=JSON.parse(t);return n>Number(i.expiredTime)?(localStorage.removeItem(e),null):JSON.parse(i.value)},X=(n(54),n(20)),Y=["component","path","exact"],Z=function(e){var t=e.component,n=e.path,i=e.exact,a=Object(X.a)(e,Y),s=c.a.useContext(b),r=s.isAuthLoaded,o=s.currentUser;return Object(u.jsx)(l.b,{exact:i,path:n,children:r?o.email?Object(u.jsx)(t,Object(q.a)({},a)):Object(u.jsx)(l.a,{to:"/"}):Object(u.jsx)(S,{})})};var $=function(){var e=c.a.useState(!1),t=Object(o.a)(e,2),n=t[0],i=t[1],a=c.a.useState(!1),s=Object(o.a)(a,2),r=s[0],d=s[1],j=c.a.useState(!1),m=Object(o.a)(j,2),p=m[0],h=m[1],O=c.a.useState({}),x=Object(o.a)(O,2),v=x[0],g=x[1],N=c.a.useState([]),k=Object(o.a)(N,2),C=k[0],S=k[1],y=Object(l.g)(),E=function(){return fetch("".concat(G,"/movies"),{method:"GET",credentials:"include"}).then(W).then((function(e){return S(e.map((function(e){return e.movieId}))),e})).catch((function(e){return console.error("get saved movies error in app - ".concat(e.message)),Promise.reject(e)}))},T=function(){var e=Q("allMovies");return e?Promise.resolve(e):fetch("https://api.nomoreparties.co/beatfilm-movies",{method:"GET"}).then(W).then((function(e){var t=e.map((function(e){return{country:e.country,director:e.director,duration:e.duration,year:e.year,description:e.description,image:"https://api.nomoreparties.co".concat(e.image.url),trailer:e.trailerLink,nameRU:e.nameRU,nameEN:e.nameEN,thumbnail:"https://api.nomoreparties.co".concat(e.image.formats.thumbnail.url),movieId:e.id}}));return K("allMovies",t,3e5),e})).catch((function(e){return console.error(e),Promise.reject(e)}))},P=function(e){g(e),i(!0)},w=function(){i(!1);var e=Q("user");return e?(i(!0),P(e),Promise.resolve(e)):fetch("".concat(G,"/users/me"),{method:"GET",credentials:"include"}).then(W).then((function(e){return i(!0),P(e),K("user",e,3e5),e})).catch((function(e){return i(!0),P({}),Promise.reject(e)}))},I=function(e,t){return function(e,t){return fetch("".concat(G,"/signin"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(W).then((function(e){return e}))}(e,t).then((function(e){console.log(e.message),w().then((function(){return y.push("/"),Promise.resolve("loggedIn")}))})).catch((function(e){return console.error(e),Promise.reject("\u0412\u043e \u0432\u0440\u0435\u043c\u044f \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437")}))};return c.a.useEffect((function(){w().then((function(){T(),E()})).catch((function(e){return console.error(e)}))}),[]),Object(u.jsx)("div",{className:"app",children:Object(u.jsx)(b.Provider,{value:{isAuthLoaded:n,currentUser:v},children:Object(u.jsx)(f.Provider,{value:{setIsSlideMenuOpen:d,setIsNotLoggedInPopupOpen:h},children:Object(u.jsxs)(_.Provider,{value:{addMovieHandler:function(e){return(t=e,fetch("".concat(G,"/movies"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(W)).then((function(e){return E().then((function(){return e}))})).catch((function(e){return console.error("add movie to user list error in app - ".concat(e)),Promise.reject(e)}));var t},deleteMovieHandler:function(e){return function(e){return fetch("".concat(G,"/movies/").concat(e),{method:"DELETE",credentials:"include"}).then(W)}(e).then((function(e){return E().then((function(){return e}))})).catch((function(e){return console.error("delete movie to user list error in app - ".concat(e)),Promise.reject(e)}))},likedMoviesIdList:C},children:[Object(u.jsxs)(l.d,{children:[Object(u.jsx)(l.b,{exact:!0,path:"/",children:Object(u.jsx)(H,{getAllMoviesHandler:T})}),Object(u.jsx)(Z,{exact:!0,path:"/saved-movies",component:J,getUserMoviesHandler:E}),Object(u.jsx)(Z,{exact:!0,path:"/profile",onSignoutButtonClick:function(){return i(!1),fetch("".concat(G,"/signout"),{method:"GET",credentials:"include"}).then(W).then((function(e){return e})).then((function(e){return console.log(e.message),i(!0),localStorage.removeItem("user"),localStorage.removeItem("filteredMovies"),P({}),y.push("/"),Promise.resolve("registered")})).catch((function(e){return i(!0),console.error(e),Promise.reject("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u044b\u0439\u0442\u0438 \u0438\u0437 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437")}))},onUpdateButtonClick:function(e,t){return function(e,t){return fetch("".concat(G,"/users/me"),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,name:t})}).then(W)}(t,e).then((function(e){return K("user",e,3e5),g(e),Promise.resolve(e)})).catch((function(e){return console.error(e),Promise.reject("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437")}))},component:z}),Object(u.jsx)(l.b,{exact:!0,path:"/signin",children:(null===v||void 0===v?void 0:v.email)?Object(u.jsx)(l.a,{to:"/"}):Object(u.jsx)(R,{onSigninButtonClick:I})}),Object(u.jsx)(l.b,{exact:!0,path:"/signup",children:(null===v||void 0===v?void 0:v.email)?Object(u.jsx)(l.a,{to:"/"}):Object(u.jsx)(V,{onSignupButtonClick:function(e,t,n){return function(e,t,n){return fetch("".concat(G,"/signup"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,password:n})}).then(W).then((function(e){return e}))}(e,t,n).then((function(e){return console.log(e.message),I(t,n).then((function(){return Promise.resolve("registered")}))})).catch((function(e){return console.error(e),Promise.reject("\u0412\u043e \u0432\u0440\u0435\u043c\u044f \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437")}))}})}),Object(u.jsx)(l.b,{path:"*",children:Object(u.jsx)(D,{})})]}),r&&Object(u.jsx)(L,{isOpen:r}),p&&Object(u.jsx)(B,{})]})})})})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,56)).then((function(t){var n=t.getCLS,i=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),i(e),c(e),a(e),s(e)}))};s.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(r.a,{children:Object(u.jsx)($,{})})}),document.getElementById("root")),ee()}]),[[55,1,2]]]);
//# sourceMappingURL=main.13c8e4f0.chunk.js.map